<?php
class SUPPORT extends COMMON
{
  
	
public function headofmail($Domain)
{
   $Head = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional //EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html style="margin: 0;padding: 0;" xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">    
    <title>JEPH International School </title>
     <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <meta name="viewport" content="width=device-width"> 
    
</head> 
  <body class="no-padding" style="margin: 0;padding: 0;-webkit-text-size-adjust: 100%;"> 
    <table class="wrapper" style="border-collapse: collapse;table-layout: fixed;min-width: 320px;width: 100%;background-color: #ddd;" cellpadding="0" cellspacing="0" role="presentation"><tbody><tr><td>
         <div style="line-height:40px;font-size:40px;">&nbsp;</div>
      <div>
      <div class="layout one-col fixed-width" style="Margin: 0 auto;max-width: 600px;min-width: 320px; width: 320px;width: calc(28000% - 167400px);overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;">
        <div class="layout__inner" style="border-collapse: collapse;display: table;width: 100%;background-color: #ffffff;">       
          <div class="column" style="text-align: left;color: #333;font-size: 14px;line-height: 21px;font-family: Montserrat,DejaVu Sans,Verdana,sans-serif;max-width: 600px;min-width: 320px; width: 320px;width: calc(28000% - 167400px);">        
        <div style="background:#fff; padding:10px" align="center">
          <a style="text-decoration: underline;transition: opacity 0.1s ease-in;color: #109acc;" href="'.$Domain.'">
          <img class="gnd-corner-image gnd-corner-image-center gnd-corner-image-top" style="border: 0;display: block; background:#fff" alt="'.$Domain.'" src="img/big-logo.png"></a>
        </div>';
	  return $Head;	
}
	
public function headoffooter($Domain)
{
   $Footer = ' <div class="layout one-col fixed-width" style="Margin: 0 auto;max-width: 600px;min-width: 320px; width: 320px;width: calc(28000% - 167400px);overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;">
        <div class="layout__inner" style="border-collapse: collapse;display: table;width: 100%;background-color: #ffffff;">        
          <div class="column" style="text-align: left;color: #333;font-size: 14px;line-height: 21px;font-family: Montserrat,DejaVu Sans,Verdana,sans-serif;max-width: 600px;min-width: 320px; width: 320px;width: calc(28000% - 167400px);">
        
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;line-height: 20px;font-size: 1px;">&nbsp;</div>
    </div>     
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;line-height: 1px;font-size: 1px;">&nbsp;</div>
    </div>        
          </div>        
        </div>
      </div>     
  
      <div class="layout one-col fixed-width" style="Margin: 0 auto;max-width: 600px;min-width: 320px; width: 320px;width: calc(28000% - 167400px);overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;">
        <div class="layout__inner" style="border-collapse: collapse;display: table;width: 100%;background-color: #004163;">     
          <div class="column" style="text-align: left;color: #333;font-size: 14px;line-height: 21px;font-family: Montserrat,DejaVu Sans,Verdana,sans-serif;max-width: 600px;min-width: 320px; width: 320px;width: calc(28000% - 167400px);">
        
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;line-height: 20px;font-size: 1px;">&nbsp;</div>
    </div>
        
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;mso-text-raise: 4px;">
        <h2 style="Margin-top: 0;Margin-bottom: 16px;font-style: normal;font-weight: normal;color: #333;font-size: 17px;line-height: 10px;text-align: center;"><span style="color:#ffffff"><strong>NEED HELP ?</strong></span></h2>
      </div>
    </div>
        
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div class="divider" style="display: block;font-size: 2px;line-height: 2px;Margin-left: auto;Margin-right: auto;width: 40px;background-color: #aaa;Margin-bottom: 10px;">&nbsp;</div>
    </div>
        
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;mso-text-raise: 4px;">
        <p style="Margin-top: 0;Margin-bottom: 0;text-align: center;"><a style="text-decoration: underline;transition: opacity 0.1s ease-in;color: #109acc;" href="mailto:info@jeph.com"><span style="color:#ffffff">info@jeph.com</span></a></p>
        <p style="Margin-top: 20px;Margin-bottom: 0;text-align: center;">
       <a href="#" target="_blank"><img src="img/fb.png" height="24" width="24" ></a>
         <a href="#" target="_blank" ><img src="img/twit.png" height="24" width="24" ></a>
          <a href="#" target="_blank"><img src="img/youtube.png" height="24" width="24" ></a>
          <a href="#" target="_blank"><img src="img/insta.png" height="24" width="24" ></a>
          <a href="mailto:info@jeph.com" target="_blank"><img src="img/mail.png" height="24" width="24" ></a>
		 <a href="#" target="_blank"><img src="img/linked.png" height="24" width="24"></a>
		 <a href="#" target="_blank"><img src="img/pinterest.png" height="24" width="24"></a>
        </p>
        <p style="Margin-top: 10px;Margin-bottom: 10px;text-align: center;"><span style="color:#ffffff">Â© 2022 JEPH International School. All rights reserved.</span></p>
      </div>
    </div>        
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;line-height: 20px;font-size: 1px;">&nbsp;</div>
    </div>        
          </div>       
        </div>
      </div>  
       
      <div style="line-height:40px;font-size:40px;">&nbsp;</div>
    </div></td></tr></tbody></table>

</body></html>';
   
   return $Footer;	
}
	
	
  
 /**********************************************************Send Password User************************************************************/
public function Admin_send_password_user($Name,$Email,$Mobile,$SP)
{  
	$Common=new COMMON();
	$Setings = $Common->setting();
	if($Setings['Mode']==1)	{$Domain = $Setings['LiveUrl'];	}if($Setings['Mode']==0){$Domain = $Setings['DemoUrl'];	}
			
	$mail = new PHPMailer;
	$mail->IsSMTP();
	$mail->SMTPDebug = 0;
	$mail->Debugoutput = 'html';
	$mail->Host = $Setings['SmtpHost'];
	$mail->Port = $Setings['SmtpPort'];
	$mail->SMTPSecure = 'auto';
	$mail->SMTPOptions = array(
    'ssl' => array(
        'verify_peer' => false,
        'verify_peer_name' => false,
        'allow_self_signed' => true,
        'crypto_method' => STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT
    )
);
	$mail->SMTPAuth = true;
	$mail->Username = $Setings['SmtpUsername'];
	$mail->Password = $Setings['SmtpPassword'];
	$mail->setFrom($Setings['SmtpUsername'], $Setings['Title']);
	$mail->addReplyTo($Setings['SmtpUsername'], $Setings['Title']);
	$mail->addAddress($Email);
	$mail->isHTML(true);	
	$mail->Subject = 'Send Password on JEPH International School';	
  
$msg=''.$this->headofmail($Domain).'
      <div style="Margin-left: 20px;Margin-right: 20px;Margin-top: 20px;">
      <div style="mso-line-height-rule: exactly;mso-text-raise: 4px;">
        <p style="Margin-top: 0;Margin-bottom: 20px;"><strong>Hey '.$Name.'!</strong></p>
      </div>
    </div>        
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;mso-text-raise: 4px;">
        <p style="Margin-top: 0;Margin-bottom: 0;"><strong><span style="color:#5c545c">School Send Again User Name & Password, we welcome you in our family of JEPH International School and we hope you will love the experience of being part of this family.</span></strong></p>
      </div>
    </div>        
          </div>        
        </div>
      </div>  
      <div class="layout one-col fixed-width" style="Margin: 0 auto;max-width: 600px;min-width: 320px; width: 320px;width: calc(28000% - 167400px);overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;">
        <div class="layout__inner" style="border-collapse: collapse;display: table;width: 100%;background-color: #ffffff;">
        
           
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;line-height: 20px;font-size: 1px;">&nbsp;</div>
    </div>            
               <div style="Margin-left: 20px;Margin-right: 20px;">
       <table style="border:0px; width:100%">
       	  
            <tr>
            	<th>User Name :</th>
            	<th>'.$Mobile.'</th>            
            </tr>
            <tr>
            	<th>Password :</th>
            	<th>'.$SP.'</th>            
            </tr>
       </table>
    </div> 
	 <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;line-height: 20px;font-size: 1px;">&nbsp;</div>
    </div>          
          </div>      
        </div>
      </div>
  <div class="layout one-col fixed-width" style="Margin: 0 auto;max-width: 600px;min-width: 320px; width: 320px;width: calc(28000% - 167400px);overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;">
        <div class="layout__inner" style="border-collapse: collapse;display: table;width: 100%;background-color: #ffffff;">        
          <div class="column" style="text-align: left;color: #333;font-size: 14px;line-height: 21px;font-family: Montserrat,DejaVu Sans,Verdana,sans-serif;max-width: 600px;min-width: 320px; width: 320px;width: calc(28000% - 167400px);">
        
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;line-height: 20px;font-size: 1px;">&nbsp;</div>
    </div>
        
               
            <div style="Margin-left: 20px;Margin-right: 20px;Margin-top: 20px;">
      <div style="mso-line-height-rule: exactly;mso-text-raise: 4px;">
        <p class="size-15" style="Margin-top: 0;Margin-bottom: 20px;font-size: 15px;line-height: 23px;text-align: center;" lang="x-size-15"><span style="color:#03568a"><strong>Learn more at <a style="text-decoration: underline;transition: opacity 0.1s ease-in;color: #109acc;" href="'.$Domain.'">'.$Domain.'</a>!</strong></span></p>
      </div>
    </div>        
            <div style="Margin-left: 20px;Margin-right: 20px;">
      <div style="mso-line-height-rule: exactly;line-height: 1px;font-size: 1px;">&nbsp;</div>
    </div>        
          </div>        
        </div>
      </div>
     '.$this->headoffooter($Domain).' ';
$mail->msgHTML($msg);
$mail->send();
}



/****************************************************/
public function send_forgot_pass_user($Name,$Email,$Token)
{  
	$Common=new COMMON();
	$Setings = $Common->setting();
	if($Setings['Mode']==1)	{$Domain = $Setings['LiveUrl'];	}if($Setings['Mode']==0){$Domain = $Setings['DemoUrl'];	}
	//$GenralSite = $Common->getRows('settings',array('where'=>array('Id'=>1),'limit'=>1,'return_type'=>'single')); 
			
	$mail = new PHPMailer;
	$mail->IsSMTP();
	$mail->SMTPDebug = 0;
	$mail->Debugoutput = 'html';
	$mail->Host = $Setings['SmtpHost'];
	$mail->Port = $Setings['SmtpPort'];
	$mail->SMTPSecure = 'auto';
	$mail->SMTPOptions = array(
    'ssl' => array(
        'verify_peer' => false,
        'verify_peer_name' => false,
        'allow_self_signed' => true,
        'crypto_method' => STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT
    )
);
	$mail->SMTPAuth = true;
	$mail->Username = $Setings['SmtpUsername'];
	$mail->Password = $Setings['SmtpPassword'];
	$mail->setFrom($Setings['SmtpUsername'], $Setings['Title']);
	$mail->addReplyTo($Setings['SmtpUsername'], $Setings['Title']);
	$mail->addAddress($Email);
	$mail->isHTML(true);	
	$mail->Subject = 'Reset Password In JEPH International School';	
  
$msg=''.$this->headofmail($Domain).'
     <table class="body-wrap" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; width: 100%; background-color: #f6f6f6; margin: 0;" bgcolor="#f6f6f6"><tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;"><td style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0;" valign="top"></td>
		<td class="container" width="600" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; display: block !important; max-width: 600px !important; clear: both !important; margin: 0 auto;" valign="top">
			<div class="content" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; max-width: 600px; display: block; margin: 0 auto; padding: 20px;">
				<table class="main" width="100%" cellpadding="0" cellspacing="0" itemprop="action" itemscope itemtype="http://schema.org/ConfirmAction" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; border-radius: 3px; background-color: #fff; margin: 0; border: 1px solid #e9e9e9;" bgcolor="#fff">
				   
				<tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;"><td class="content-wrap" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 20px;" valign="top">
							<meta itemprop="name" content="Confirm Email" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;" /><table width="100%" cellpadding="0" cellspacing="0" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
							
							
							<tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
							  <td class="content-block" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
										Hi '.$Name.',
									</td>
								</tr><tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;"><td class="content-block" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
										You recently requested to reset your password for your JEPH International School account. Click the button below to reset it.
									</td>
								</tr><tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;"><td class="content-block" itemprop="handler" itemscope itemtype="http://schema.org/HttpActionHandler" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
										<a href="'.$Domain.'teacher/reset-password?token='.$Token.'" class="btn-primary" itemprop="url" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; color: #FFF; text-decoration: none; line-height: 2em; font-weight: bold; text-align: center; cursor: pointer; display: inline-block; border-radius: 5px; text-transform: capitalize; background-color: #35ac19; margin: 0; border-color: #35ac19; border-style: solid; border-width: 10px 20px;">Reset your password</a>
									</td>
								</tr>
								<tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;"><td class="content-block" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
										if you did not request a password reset, please ignore this email. 
									</td>
								</tr>
								<tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;"><td class="content-block" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 12px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
										if you\'re having trouble clicking reset button, copy and paste the URL below into your web browser.<br>
'.$Domain.'teacher/reset-password?token='.$Token.' 
									</td>
								</tr>
								 </table></td>
					</tr></table> </div>
		</td>
		<td style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0;" valign="top"></td>
	</tr></table>     
     '.$this->headoffooter($Domain).' ';
/* echo $msg;
 die();*/
$mail->msgHTML($msg);
$mail->send();
return 1;
}

/********************************************************/
public function send_mail_reset_confirm($Name,$Email)
{  
	$Common=new COMMON();
	$Setings = $Common->setting();
	if($Setings['Mode']==1)	{$Domain = $Setings['LiveUrl'];	}if($Setings['Mode']==0){$Domain = $Setings['DemoUrl'];	}
	//$GenralSite = $Common->getRows('settings',array('where'=>array('Id'=>1),'limit'=>1,'return_type'=>'single')); 
			
	$mail = new PHPMailer;
	$mail->IsSMTP();
	$mail->SMTPDebug = 0;
	$mail->Debugoutput = 'html';
	$mail->Host = $Setings['SmtpHost'];
	$mail->Port = $Setings['SmtpPort'];
	$mail->SMTPSecure = 'auto';
	$mail->SMTPOptions = array(
    'ssl' => array(
        'verify_peer' => false,
        'verify_peer_name' => false,
        'allow_self_signed' => true,
        'crypto_method' => STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT
    )
);
	$mail->SMTPAuth = true;
	$mail->Username = $Setings['SmtpUsername'];
	$mail->Password = $Setings['SmtpPassword'];
	$mail->setFrom($Setings['SmtpUsername'], $Setings['Title']);
	$mail->addReplyTo($Setings['SmtpUsername'], $Setings['Title']);
	$mail->addAddress($Email);
	$mail->isHTML(true);	
	$mail->Subject = 'Password Change In JEPH International School';	
  
$msg=''.$this->headofmail($Domain).'
         <table class="body-wrap" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; width: 100%; background-color: #f6f6f6; margin: 0;" bgcolor="#f6f6f6"><tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;"><td style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0;" valign="top"></td>
		<td class="container" width="600" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; display: block !important; max-width: 600px !important; clear: both !important; margin: 0 auto;" valign="top">
			<div class="content" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; max-width: 600px; display: block; margin: 0 auto; padding: 20px;">
				<table class="main" width="100%" cellpadding="0" cellspacing="0" itemprop="action" itemscope itemtype="http://schema.org/ConfirmAction" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; border-radius: 3px; background-color: #fff; margin: 0; border: 1px solid #e9e9e9;" bgcolor="#fff">
				  
				<tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;"><td class="content-wrap" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 20px;" valign="top">
							<meta itemprop="name" content="Confirm Email" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;" /><table width="100%" cellpadding="0" cellspacing="0" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
							<tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
							  <td class="content-block" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top">
										Hi '.$Name.',
									</td>
								</tr><tr style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
								  <td class="content-block" style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px;" valign="top"><span style="margin-top:0;margin-bottom:10px;margin-right:10px;margin-left:10px;padding-top:0;padding-bottom:0;padding-right:0;padding-left:0">
Your Password successfully Changed</span></td>
								</tr>
								 </table></td>
					</tr></table </div>
		</td>
		<td style="font-family: Tahoma, Geneva, sans-serif,Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0;" valign="top"></td>
	</tr></table>
     '.$this->headoffooter($Domain).' ';
/*echo $msg;
 die();*/
$mail->msgHTML($msg);
$mail->send();
return 1;
}



}
?>